<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core">
	
	<h:head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>Catalogar livros</title>
	</h:head>
	<h:body>
		
		<h:form>
			<h3>
				<h:commandLink value="Obter ajuda" action="#{catalogaLivro.obterAjuda}" />
			</h3>
			
			Titulo:
			<h:inputText value="#{catalogaLivro.livro.titulo}" />
			<br/>
			
			Autores:
			<h:inputText value="#{catalogaLivro.livro.autores}" />
			<br/>
			
			Assunto:
			<h:inputText value="#{catalogaLivro.livro.assunto}" />
			<br/>
			
			<h:commandButton value="Incluir livro" action="#{catalogaLivro.incluirLivro}" />
		</h:form>
		<br/>
		
		<h:form>
			Pesquisar livro por t√≠tulo:
			<h:inputText 
				value="#{catalogaLivro.tituloPesquisa}"
				valueChangeListener="#{catalogaLivro.tituloPesquisaAlterado}"
				onchange="submit()" />
		</h:form>
		
		<h:form>
			<ol>
				<ui:repeat var="item" value="#{catalogaLivro.listaLivrosFiltrados}">
					<li>
						#{item.titulo} - #{item.autores} - #{item.assunto}
						
						<h:commandButton value="Excluir" action="#{catalogaLivro.excluir}">
							<f:setPropertyActionListener
								target="#{catalogaLivro.livroSelecionado}" 
								value="#{item}" />
						</h:commandButton>
					</li>
				</ui:repeat>
			</ol>
			
			<h3>
				<h:commandLink value="Voltar para tela inicial" action="#{catalogaLivro.telaInicial}" />
			</h3>
		</h:form>
		
	</h:body>
</html> 